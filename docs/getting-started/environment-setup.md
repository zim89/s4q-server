# ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Space4Quizlet Server.

## üìã –û–±–∑–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- **–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –ø–æ—Ä—Ç, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –¥–æ–º–µ–Ω—ã
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- **JWT** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - –≤–Ω–µ—à–Ω–∏–µ API (—Å–ª–æ–≤–∞—Ä—å)

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞
cp env.example .env
```

### 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
NODE_ENV=development
PORT=4000
GLOBAL_PREFIX=v1

# –î–æ–º–µ–Ω—ã –∏ CORS
COOKIE_DOMAIN=localhost
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=postgres
POSTGRES_PASSWORD=dev_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=s4q_db
POSTGRES_URI=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public

# JWT —Ç–æ–∫–µ–Ω—ã
JWT_SECRET=your-super-secret-jwt-key-here
JWT_ACCESS_TOKEN_TTL=1h
JWT_REFRESH_TOKEN_TTL=7d

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
FREE_DICTIONARY_API_BASE_URL=https://api.dictionaryapi.dev/api/v2/entries
```

## üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è      | –û–ø–∏—Å–∞–Ω–∏–µ                 | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| --------------- | ------------------------ | --------------------- |
| `NODE_ENV`      | –û–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è     | `development`         |
| `PORT`          | –ü–æ—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | `4000`                |
| `GLOBAL_PREFIX` | –ü—Ä–µ—Ñ–∏–∫—Å API              | `v1`                  |

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è          | –û–ø–∏—Å–∞–Ω–∏–µ               | –ü—Ä–∏–º–µ—Ä           |
| ------------------- | ---------------------- | ---------------- |
| `POSTGRES_USER`     | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î        | `postgres`       |
| `POSTGRES_PASSWORD` | –ü–∞—Ä–æ–ª—å –ë–î              | `dev_password`   |
| `POSTGRES_HOST`     | –•–æ—Å—Ç –ë–î                | `localhost`      |
| `POSTGRES_PORT`     | –ü–æ—Ä—Ç –ë–î                | `5433`           |
| `POSTGRES_DB`       | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö        | `s4q_db`         |
| `POSTGRES_URI`      | –ü–æ–ª–Ω—ã–π URI –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è |

### JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è              | –û–ø–∏—Å–∞–Ω–∏–µ                   | –ü—Ä–∏–º–µ—Ä                     |
| ----------------------- | -------------------------- | -------------------------- |
| `JWT_SECRET`            | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT     | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| `JWT_ACCESS_TOKEN_TTL`  | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access —Ç–æ–∫–µ–Ω–∞  | `1h`                       |
| `JWT_REFRESH_TOKEN_TTL` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ refresh —Ç–æ–∫–µ–Ω–∞ | `7d`                       |

### CORS –∏ –¥–æ–º–µ–Ω—ã

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è        | –û–ø–∏—Å–∞–Ω–∏–µ                | –ü—Ä–∏–º–µ—Ä                                        |
| ----------------- | ----------------------- | --------------------------------------------- |
| `COOKIE_DOMAIN`   | –î–æ–º–µ–Ω –¥–ª—è cookies       | `localhost`                                   |
| `ALLOWED_ORIGINS` | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ CORS –¥–æ–º–µ–Ω—ã | `http://localhost:3000,http://localhost:3001` |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT_SECRET

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞
openssl rand -hex 32
```

### Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–î–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
NODE_ENV=production
PORT=4000
GLOBAL_PREFIX=v1

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã
COOKIE_DOMAIN=yourdomain.com
ALLOWED_ORIGINS=https://yourdomain.com

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Docker/—Å–µ—Ä–≤–µ—Ä–∞
POSTGRES_URI=${DATABASE_URL}
JWT_SECRET=${JWT_SECRET}
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
bun run start:dev
```

### 2. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
bun run prisma:generate
bun run prisma:db:push
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
# Health check
curl http://localhost:4000/v1/health
```

## üÜò –ü—Ä–æ–±–ª–µ–º—ã

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

1. **"Invalid database URL"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `POSTGRES_URI`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î –∑–∞–ø—É—â–µ–Ω–∞

2. **"JWT_SECRET is required"**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `JWT_SECRET`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç

3. **"Port already in use"**
   - –ò–∑–º–µ–Ω–∏—Ç–µ `PORT`
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
node -e "console.log(process.env)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
echo $POSTGRES_URI
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](../architecture/README.md#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [Docker –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](../deployment/docker.md)
- [Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](../deployment/production.md)
