/// Карточка пользователя
/// 
/// Модель для связи пользователей с карточками.
/// Хранит персональные данные пользователя для каждой карточки:
/// собственные определения, примеры, статус прогресса, избранное.
model UserCard {
  /// Уникальный идентификатор записи
  id              String   @id @default(cuid())
  
  /// ID пользователя
  userId          String
  
  /// ID карточки
  cardId          String

  /// Связь с пользователем
  user            User     @relation(fields: [userId], references: [id])
  
  /// Связь с карточкой
  card            Card     @relation(fields: [cardId], references: [id])

  /// Пользовательское определение карточки
  customDefinition String?
  
  /// Пользовательский пример использования
  customExample    String?
  
  /// Статус прогресса изучения карточки
  progressStatus  ProgressStatus @default(NOT_STARTED)
  
  /// Режим изучения карточки
  studyMode       StudyMode?
  
  /// Персональная сложность карточки для пользователя
  difficulty      CardDifficulty?
  
  /// Добавлена ли карточка в избранное
  isFavorite      Boolean @default(false)
  
  /// Дата и время последнего повторения
  lastReviewedAt  DateTime?

  @@map("user_cards")
  @@unique([userId, cardId])
  @@index([userId, progressStatus])
  @@index([isFavorite])
  @@index([lastReviewedAt])
}
