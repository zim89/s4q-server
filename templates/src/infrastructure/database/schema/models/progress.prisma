/// Прогресс изучения набора карточек
/// 
/// Модель для отслеживания общего прогресса пользователя в изучении набора.
/// Хранит общую статистику и настройки интервального повторения.
/// Детальная статистика по упражнениям хранится в ExerciseProgress.
model Progress {
  /// Уникальный идентификатор прогресса
  id         String @id @default(cuid())
  
  /// Дата и время создания записи
  createdAt  DateTime @default(now())
  
  /// Дата и время последнего обновления записи
  updatedAt  DateTime @updatedAt

  /// Дата следующего повторения (для интервального повторения)
  nextReviewAt DateTime?
  
  /// Настройки пользовательских режимов изучения в формате JSON
  customModes  Json?
  
  /// Режим изучения
  studyMode   StudyMode?

  /// ID пользователя
  userId     String
  
  /// Связь с пользователем
  user       User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  /// ID набора пользователя
  userSetId  String @unique
  
  /// Связь с набором пользователя
  userSet    UserSet @relation(fields: [userSetId], references: [id], onDelete: Cascade)

  // Связи с другими моделями
  /// Прогресс по упражнениям
  exerciseProgresses ExerciseProgress[]

  @@map("progresses")
  @@index([userId, nextReviewAt])
}
